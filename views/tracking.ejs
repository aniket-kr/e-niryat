

<style>
    .steps .step {
        display: block;
        width: 100%;
        margin-bottom: 35px;
        text-align: center
    }

    .steps .step .step-icon-wrap {
        display: block;
        position: relative;
        width: 100%;
        height: 80px;
        text-align: center
    }

    .steps .step .step-icon-wrap::before,
    .steps .step .step-icon-wrap::after {
        display: block;
        position: absolute;
        top: 50%;
        width: 50%;
        height: 3px;
        margin-top: -1px;
        background-color: #e1e7ec;
        content: '';
        z-index: 1
    }

    .steps .step .step-icon-wrap::before {
        left: 0
    }

    .steps .step .step-icon-wrap::after {
        right: 0
    }

    .steps .step .step-icon {
        display: inline-block;
        position: relative;
        width: 80px;
        height: 80px;
        border: 1px solid #e1e7ec;
        border-radius: 50%;
        background-color: #f5f5f5;
        color: #374250;
        font-size: 38px;
        line-height: 81px;
        z-index: 5
    }

    .steps .step .step-title {
        margin-top: 16px;
        margin-bottom: 0;
        color: #606975;
        font-size: 14px;
        font-weight: 500
    }

    .steps .step:first-child .step-icon-wrap::before {
        display: none
    }

    .steps .step:last-child .step-icon-wrap::after {
        display: none
    }

    .steps .step.completed .step-icon-wrap::before,
    .steps .step.completed .step-icon-wrap::after {
        background-color: #0da9ef
    }

    .steps .step.completed .step-icon {
        border-color: #0da9ef;
        background-color: #0da9ef;
        color: #fff
    }

    @media (max-width: 576px) {

        .flex-sm-nowrap .step .step-icon-wrap::before,
        .flex-sm-nowrap .step .step-icon-wrap::after {
            display: none
        }
    }

    @media (max-width: 768px) {

        .flex-md-nowrap .step .step-icon-wrap::before,
        .flex-md-nowrap .step .step-icon-wrap::after {
            display: none
        }
    }

    @media (max-width: 991px) {

        .flex-lg-nowrap .step .step-icon-wrap::before,
        .flex-lg-nowrap .step .step-icon-wrap::after {
            display: none
        }
    }

    @media (max-width: 1200px) {

        .flex-xl-nowrap .step .step-icon-wrap::before,
        .flex-xl-nowrap .step .step-icon-wrap::after {
            display: none
        }
    }

    .bg-faded,
    .bg-secondary {
        background-color: #f5f5f5 !important;
    }
</style>

<!-- Start Banner Area -->
<section class="banner-area organic-breadcrumb">
    <div class="container">
        <div class="breadcrumb-banner d-flex flex-wrap align-items-center justify-content-end">
            <div class="col-first">
                <h1>Order Tracking</h1>
                <nav class="d-flex align-items-center">
                    <a href="index.html">Home<span class="lnr lnr-arrow-right"></span></a>
                    <a href="category.html">Fashion Category</a>
                </nav>
            </div>
        </div>
    </div>
</section>
<!-- End Banner Area -->

 <!--================Tracking Box Area =================-->
 <section class="tracking_box_area section_gap">
    <div class="container">
        <div class="tracking_box_inner">
            <p>To track your order please enter your Order ID in the box below and press the "Track" button. This
                was given to you on your receipt and in the confirmation email you should have received.</p>
            <form class="row tracking_form" method="GET" novalidate="novalidate">
                <div class="col-md-12 form-group">
                    <input type="text" class="form-control" id="order" name="orderId" placeholder="Order ID"
                        onfocus="this.placeholder = ''" onblur="this.placeholder = 'Order ID'" value="<%= orderId || '' %>">
                </div>
                <div class="col-md-12 form-group">
                    <button type="submit" value="submit" class="primary-btn">Track Order</button>
                </div>
            </form>
        </div>
    </div>
</section>

<!-- Tracking  -->
<% if (orderId) { %>
    <div class="container padding-bottom-3x mb-1">
        <div class="card mb-3">
            <div class="p-4 text-center text-white text-lg bg-dark rounded-top"><span class="text-uppercase">Tracking
                    Order No - </span><span class="text-medium"><%= orderId %></span></div>
            <div class="d-flex flex-wrap flex-sm-nowrap justify-content-between py-3 px-2 bg-secondary">
                <div class="w-100 text-center py-1 px-2"><span class="text-medium">Shipped Via:</span>India Post Air Parcel</div>
                <div class="w-100 text-center py-1 px-2"><span class="text-medium">Status:</span><%= orderedProducts[0].status %></div>
                <div class="w-100 text-center py-1 px-2"><span class="text-medium">Expected Delivery: In <span id="mkcDate"><%= orderId %></span> days(s)</span></div>
            </div>
            <div class="card-body">
                <div
                    class="steps d-flex flex-wrap flex-sm-nowrap justify-content-between padding-top-2x padding-bottom-1x">
                    <div class="step completed">
                        <div class="step-icon-wrap">
                            <div class="step-icon"><i class="pe-7s-cart"></i></div>
                        </div>
                        <h4 class="step-title">Confirmed Order</h4>
                    </div>
                    <div class="step completed">
                        <div class="step-icon-wrap">
                            <div class="step-icon"><i class="pe-7s-config"></i></div>
                        </div>
                        <h4 class="step-title">Processing Order</h4>
                    </div>
                    <div class="step">
                        <div class="step-icon-wrap">
                            <div class="step-icon"><i class="pe-7s-medal"></i></div>
                        </div>
                        <h4 class="step-title">Quality Check</h4>
                    </div>
                    <div class="step">
                        <div class="step-icon-wrap">
                            <div class="step-icon"><i class="pe-7s-car"></i></div>
                        </div>
                        <h4 class="step-title">Product Dispatched</h4>
                    </div>
                    <div class="step">
                        <div class="step-icon-wrap">
                            <div class="step-icon"><i class="pe-7s-home"></i></div>
                        </div>
                        <h4 class="step-title">Product Delivered</h4>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End Tracking  -->

    <div>

    </div>

    <!-- Product Tracking table  -->
    <section style="padding: 50px 150px 200px 150px;">
        <h1 style="text-align: center;">Order Details</h1>
        <div class="col-lg-12 table" style="margin-top: 30px;">
            <table class="table table-bordered">
                <thead class="table-dark">
                    <th>Product Name</th>
                    <th>Quantity</th>
                    <th>Order Date</th>
                    <th>Order Status</th>
                    <th>Action</th>
                </thead>
                <tbody>
                    <% if (orderedProducts) { %>
                    <% orderedProducts.forEach((prod, index)=> { %>
                        <tr>
                            <td>
                                <%= prod.product.name %>
                            </td>
                            <td>
                                <%= prod.quantity %>
                            </td>
                            <td>
                                <%= prod.orderedAt.toLocaleString('en-IN') %>
                            </td>
                            <td>
                                <%= prod.status %>
                            </td>
                            <td>
                                <a href="/generate-pdf?orderId=<%= orderId %>&productId=<%= prod.product._id %>" target="_blank" role="btn" class="primary-btn">Download PDF</a>
                            </td>
                        </tr>
                        <% }) %>
                        <% } %>

                            <tr>
                                <td colspan="4"></td>
                            </tr>
                </tbody>
            </table>
        </div>
    </section>
    <% } %>
        <!--================End Tracking Box Area =================-->


        <script>
            function randInt(lo, hi) {
                return Math.floor(lo + (Math.random() * (hi - lo)));
            }
        
            function deliveryDate() {
                return randInt(12, 16);
            }
        
            function getDeliveryDate(slug) {
                if (!localStorage.getItem(slug)) {
                    localStorage.setItem(slug, deliveryDate());
                }
                return localStorage.getItem(slug)
            }
            const span = document.getElementById('mkcDate');
            span.innerHTML = getDeliveryDate(span.innerHTML);
        </script>